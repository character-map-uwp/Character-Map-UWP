<views:ViewBase
    x:Class="CharacterMap.Views.SettingsView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:CharacterMap.Controls"
    xmlns:core="using:CharacterMap.Core"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:h="using:CharacterMap.Helpers"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:CharacterMap.Models"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:views="using:CharacterMap.Views"
    xmlns:win1903="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractPresent(Windows.Foundation.UniversalApiContract, 8)"
    Loaded="View_Loaded"
    TabFocusNavigation="Cycle"
    mc:Ignorable="d"
    d:DesignHeight="1880"
    d:DesignWidth="1920">

    <UserControl.Resources>

        <Style BasedOn="{StaticResource DefaultThemeComboBoxStyle}" TargetType="ComboBox" />

        <DataTemplate x:Key="BlankTemplate" />

        <Style x:Key="SubheaderTextBlockStyle2" BasedOn="{StaticResource SubheaderTextBlockStyle}" TargetType="TextBlock">
            <Setter Property="FontSize" Value="20" />
            <Setter Property="FontWeight" Value="Normal" />
            <Setter Property="Margin" Value="0 12 0 4" />
        </Style>

        <!--<Style TargetType="RadioButton">
            <Setter Property="MinWidth" Value="200" />
        </Style>-->

        <!--<Style BasedOn="{StaticResource DefaultThemeToggleSwitchStyle}" TargetType="ToggleSwitch" />-->
    </UserControl.Resources>

    <Grid x:Name="Root">

        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup x:Name="SizeStates">
                <VisualState x:Name="DefaultSizeState">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="740" />
                    </VisualState.StateTriggers>
                </VisualState>
                <VisualState x:Name="CompactSizeState">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0" />
                    </VisualState.StateTriggers>
                    <VisualState.Setters>
                        <Setter Target="MenuColumn.Width" Value="44" />
                        <Setter Target="SpacerColumn.Width" Value="48" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
            <VisualStateGroup x:Name="ThemeStatesGroup">
                <VisualState x:Name="DefaultThemeState" />
                <VisualState x:Name="ClassicThemeState">
                    <VisualState.Setters>
                        <Setter Target="Presenter.TitleBackgroundBrush" Value="Transparent" />
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="ZuneThemeState">
                    <VisualState.Setters>
                        <Setter Target="MenuColumn.Spacing" Value="8" />
                        <Setter Target="MenuColumn.Padding" Value="20 0 0 0" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
            <VisualStateGroup x:Name="ScrollStates">
                <VisualState x:Name="ContentScrollEnabledState" />
                <VisualState x:Name="ContentScrollDisabledState">
                    <VisualState.Setters>
                        <Setter Target="ContentScroller.VerticalScrollBarVisibility" Value="Disabled" />
                        <Setter Target="ContentScroller.VerticalScrollMode" Value="Disabled" />
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>

        <controls:ModalPagePresenter
            x:Name="Presenter"
            Title="{core:Localizer Key='SettingsHeader/Text'}"
            CloseClicked="{x:Bind Hide}"
            TitleBarHeight="{x:Bind TitleBarHeight, Mode=OneWay}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <StackPanel
                    x:Name="MenuColumn"
                    Width="256"
                    Margin="0 24 0 0"
                    ChildrenTransitions="{x:Bind GetRepositionCollection(ViewModel.AllowAnimation), Mode=OneWay}"
                    Style="{StaticResource SettingsMenuStyle}">

                    <controls:MenuButton
                        Checked="MenuItem_Checked"
                        Content="{x:Bind h:Localization.Get('SettingsUIHeader/Text')}"
                        Tag="{x:Bind UserInterfacePanel}">
                        <controls:MenuButton.Icon>
                            <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE771;" />
                        </controls:MenuButton.Icon>
                    </controls:MenuButton>

                    <controls:MenuButton
                        Checked="MenuItem_Checked"
                        Content="{x:Bind h:Localization.Get('SettingsAdvancedUILabel/Text')}"
                        Tag="{x:Bind UserInterfaceAdvancedPanel}">
                        <controls:MenuButton.Icon>
                            <PathIcon
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Data="F1 M 13.125 0.019531 L 6.25 3.457031 L 6.25 6.445313 L 7.5 7.070313 L 7.5 4.853516 L 12.5 7.353516 L 12.5 10.498047 L 13.75 9.873047 L 13.75 7.353516 L 18.75 4.853516 L 18.75 10.498047 L 20 11.123047 L 20 3.457031 Z M 13.125 6.269531 L 8.271484 3.847656 L 10.332031 2.8125 L 14.853516 5.400391 Z M 16.201172 4.736328 L 11.669922 2.148438 L 13.125 1.416016 L 17.978516 3.847656 Z M 11.25 11.123047 L 11.25 10.341797 L 5.625 7.529297 L 0 10.341797 L 0 16.943359 L 5.625 19.765625 L 10 17.578125 L 10 16.171875 L 6.25 18.056641 L 6.25 13.613281 L 10 11.738281 L 10 11.748047 Z M 5 18.056641 L 1.25 16.171875 L 1.25 11.738281 L 5 13.613281 Z M 5.625 12.529297 L 2.021484 10.732422 L 5.625 8.925781 L 9.228516 10.732422 Z M 11.25 12.519531 L 11.25 17.666016 L 15.625 19.853516 L 20 17.666016 L 20 12.519531 L 15.625 10.332031 Z M 15 18.144531 L 12.5 16.894531 L 12.5 13.916016 L 15 15.166016 Z M 18.75 16.894531 L 16.25 18.144531 L 16.25 15.166016 L 18.75 13.916016 Z M 15.625 14.082031 L 13.271484 12.900391 L 15.625 11.728516 L 17.978516 12.900391 Z " />
                        </controls:MenuButton.Icon>
                    </controls:MenuButton>

                    <controls:MenuButton
                        Checked="MenuItem_Checked"
                        Content="{x:Bind h:Localization.Get('SettingsExportHeader/Text')}"
                        Tag="{x:Bind ExportPanel}">
                        <controls:MenuButton.Icon>
                            <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE2B4;" />
                        </controls:MenuButton.Icon>
                    </controls:MenuButton>

                    <controls:MenuButton
                        Checked="MenuItem_Checked"
                        Content="{x:Bind h:Localization.Get('SettingsCharacterSearchHeader/Text')}"
                        Tag="{x:Bind SearchPanel}">
                        <controls:MenuButton.Icon>
                            <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE11A;" />
                        </controls:MenuButton.Icon>
                    </controls:MenuButton>

                    <controls:MenuButton
                        Checked="MenuItem_Checked"
                        Content="{x:Bind h:Localization.Get('SettingsCollectionsHeader')}"
                        Tag="{x:Bind CollectionPanel}">
                        <controls:MenuButton.Icon>
                            <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE71D;" />
                        </controls:MenuButton.Icon>
                    </controls:MenuButton>

                    <controls:MenuButton
                        controls:MenuButton.Icon="Font"
                        Checked="MenuItem_Checked"
                        Content="{x:Bind h:Localization.Get('SettingsFontManagementLabel/Text')}"
                        Tag="{x:Bind FontPanel}" />

                    <controls:MenuButton
                        Checked="MenuItem_Checked"
                        Content="{x:Bind h:Localization.Get('SettingsChangelogLabel/Text')}"
                        Tag="{x:Bind ChangePanel}">
                        <controls:MenuButton.Icon>
                            <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xEC7A;" />
                        </controls:MenuButton.Icon>
                    </controls:MenuButton>

                    <controls:MenuButton
                        Checked="MenuItem_Checked"
                        Content="{x:Bind h:Localization.Get('SettingsLicensesLabel/Text')}"
                        Tag="{x:Bind LicensesPanel}">
                        <controls:MenuButton.Icon>
                            <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xF571;" />
                        </controls:MenuButton.Icon>
                    </controls:MenuButton>

                    <controls:MenuButton
                        Checked="MenuItem_Checked"
                        Content="{x:Bind h:Localization.Get('SettingsAboutLabel/Text')}"
                        Tag="{x:Bind AboutPanel}">
                        <controls:MenuButton.Icon>
                            <FontIcon FontFamily="{StaticResource SymbolThemeFontFamily}" Glyph="&#xE946;" />
                        </controls:MenuButton.Icon>
                    </controls:MenuButton>

                </StackPanel>

                <Border
                    x:Name="ContentBorder"
                    Grid.Column="1"
                    core:Properties.UseStandardReposition="{x:Bind ViewModel.AllowAnimation, Mode=OneWay}">
                    <!--  RepositionAnimation on the ScrollViewer itself breaks hit testing  -->
                    <ScrollViewer x:Name="ContentScroller">
                        <Grid
                            x:Name="ContentPanel"
                            ColumnSpacing="16"
                            Margin="20 14 20 120">

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" MaxWidth="700" />
                                <ColumnDefinition x:Name="SpacerColumn" Width="0.35*" />
                            </Grid.ColumnDefinitions>

                            <StackPanel x:Name="UserInterfacePanel" Visibility="Collapsed">
                                <!--#region USER INTERFACE-->

                                <TextBlock
                                    x:Uid="SettingsUIHeader"
                                    Style="{StaticResource SectionHeaderTextBlockStyle}"
                                    d:Text="#UserInterface" />

                                <controls:SettingsPresenter
                                    Title="{core:Localizer Key=SettingsCharGridHeader/Text}"
                                    ContentPlacement="Bottom"
                                    Description="{core:Localizer Key=SettingsCharGridDescription/Text}">
                                    <StackPanel>
                                        <Slider
                                            HorizontalAlignment="Stretch"
                                            IsThumbToolTipEnabled="True"
                                            Maximum="{x:Bind core:AppSettings.MaxGridSize}"
                                            Minimum="{x:Bind core:AppSettings.MinGridSize}"
                                            StepFrequency="8"
                                            TickFrequency="8"
                                            TickPlacement="Outside"
                                            Value="{x:Bind GetGridSize(GridSize), Mode=TwoWay, BindBack=UpdateGridSize}" />
                                        <TextBlock Style="{StaticResource BodyTextBlockStyle}">
                                            <Run Text="{x:Bind GridSize, Mode=OneWay}" />
                                            <Run Text="px" />
                                        </TextBlock>
                                    </StackPanel>
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter
                                    Title="{core:Localizer Key=SettingsCharLabel/Text}"
                                    ContentPlacement="Bottom"
                                    Description="{core:Localizer Key=SettingsCharLabelDesc/Text}">
                                    <StackPanel>
                                        <ComboBox
                                            MinWidth="160"
                                            ItemsSource="{x:Bind ViewModel.Annotations}"
                                            SelectedItem="{x:Bind Settings.GlyphAnnotation, Mode=TwoWay}">
                                            <ComboBox.ItemTemplate>
                                                <DataTemplate x:DataType="models:GlyphAnnotation">
                                                    <TextBlock Text="{x:Bind core:Converters.GetLocalizedEnumName((models:GlyphAnnotation))}" />
                                                </DataTemplate>
                                            </ComboBox.ItemTemplate>
                                        </ComboBox>

                                        <Border
                                            Margin="0 12 0 0"
                                            HorizontalAlignment="Left"
                                            BorderBrush="{ThemeResource PivotNavButtonBackgroundThemeBrush}"
                                            BorderThickness="1"
                                            CornerRadius="4">
                                            <StackPanel
                                                Padding="4 4 0 0"
                                                h:CompositionFactory.CornerRadius="4"
                                                Background="{ThemeResource ApplicationPageBackgroundThemeBrush}"
                                                Orientation="Horizontal">
                                                <StackPanel.BackgroundTransition>
                                                    <BrushTransition x:Name="BackgroundTransition" Duration="0:0:0.25" />
                                                </StackPanel.BackgroundTransition>
                                                <GridViewItem>
                                                    <Grid
                                                        Width="{x:Bind GridSize, Mode=OneWay}"
                                                        Height="{x:Bind GridSize, Mode=OneWay}"
                                                        Padding="4">
                                                        <TextBlock
                                                            x:Name="Preview1"
                                                            Margin="0 -2 0 0"
                                                            Padding="0,0,0,8"
                                                            FontSize="{x:Bind core:Converters.GetFontSize(GridSize), Mode=OneWay}"
                                                            IsTextScaleFactorEnabled="False"
                                                            Text="A"
                                                            TextAlignment="Center" />
                                                        <TextBlock
                                                            Style="{StaticResource CharItemUnicodeStyle}"
                                                            Text="{x:Bind core:Converters.GetAnnotation(Settings.GlyphAnnotation, 65), Mode=OneWay}"
                                                            Visibility="{x:Bind ShowUnicode(Settings.GlyphAnnotation), Mode=OneWay}" />
                                                    </Grid>
                                                </GridViewItem>

                                                <GridViewItem>
                                                    <Grid
                                                        Width="{x:Bind GridSize, Mode=OneWay}"
                                                        Height="{x:Bind GridSize, Mode=OneWay}"
                                                        Padding="4">
                                                        <TextBlock
                                                            x:Name="Preview2"
                                                            Margin="0 -2 0 0"
                                                            Padding="0,0,0,8"
                                                            FontSize="{x:Bind core:Converters.GetFontSize(GridSize), Mode=OneWay}"
                                                            IsTextScaleFactorEnabled="False"
                                                            Text="b"
                                                            TextAlignment="Center" />
                                                        <TextBlock
                                                            Style="{StaticResource CharItemUnicodeStyle}"
                                                            Text="{x:Bind core:Converters.GetAnnotation(Settings.GlyphAnnotation, 98), Mode=OneWay}"
                                                            Visibility="{x:Bind ShowUnicode(Settings.GlyphAnnotation), Mode=OneWay}" />
                                                    </Grid>
                                                </GridViewItem>

                                                <GridViewItem>
                                                    <Grid
                                                        Width="{x:Bind GridSize, Mode=OneWay}"
                                                        Height="{x:Bind GridSize, Mode=OneWay}"
                                                        Padding="4">
                                                        <TextBlock
                                                            x:Name="Preview3"
                                                            Margin="0 -2 0 0"
                                                            Padding="0,0,0,8"
                                                            FontSize="{x:Bind core:Converters.GetFontSize(GridSize), Mode=OneWay}"
                                                            IsTextScaleFactorEnabled="False"
                                                            Text="y"
                                                            TextAlignment="Center" />
                                                        <TextBlock
                                                            Style="{StaticResource CharItemUnicodeStyle}"
                                                            Text="{x:Bind core:Converters.GetAnnotation(Settings.GlyphAnnotation, 121), Mode=OneWay}"
                                                            Visibility="{x:Bind ShowUnicode(Settings.GlyphAnnotation), Mode=OneWay}" />
                                                    </Grid>
                                                </GridViewItem>

                                            </StackPanel>

                                        </Border>

                                        <TextBlock x:Uid="SettingsCharPreviewHint" Style="{StaticResource HintStyle}" />
                                    </StackPanel>
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter
                                    Title="{core:Localizer Key=FontListDisplayHeader/Text}"
                                    ContentPlacement="Bottom"
                                    Description="{core:Localizer Key=SettingsFontListDescription/Text}">
                                    <StackPanel>

                                        <controls:UXRadioButton
                                            x:Name="UseActualFont"
                                            x:Uid="RbUseActualFont"
                                            Checked="UseActualFont_Checked"
                                            GroupName="FontList" />
                                        <controls:UXRadioButton
                                            x:Name="UseSystemFont"
                                            x:Uid="RbUseSystemFont"
                                            Checked="UseSystemFont_Checked"
                                            GroupName="FontList" />

                                        <ListView
                                            x:Name="LstFontFamily"
                                            Width="256"
                                            Margin="0 12 0 0"
                                            HorizontalAlignment="Left"
                                            Background="{ThemeResource DefaultHostBrush}"
                                            BorderBrush="{ThemeResource PivotNavButtonBackgroundThemeBrush}"
                                            BorderThickness="1"
                                            CornerRadius="4"
                                            IsHitTestVisible="False"
                                            IsItemClickEnabled="False"
                                            IsSwipeEnabled="False"
                                            IsTabStop="False"
                                            ItemContainerTransitions="{StaticResource NoTransitions}"
                                            ItemTemplate="{StaticResource FontListItemTemplate}"
                                            SelectionMode="None"
                                            ShowsScrollingPlaceholders="False">
                                            <ListView.Resources>
                                                <Style BasedOn="{StaticResource ListViewItemRevealStyle}" TargetType="ListViewItem">
                                                    <Setter Property="IsTabStop" Value="False" />
                                                    <Setter Property="HorizontalAlignment" Value="Stretch" />
                                                    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                                                    <Setter Property="Padding" Value="0" />
                                                </Style>
                                            </ListView.Resources>
                                        </ListView>

                                        <TextBlock x:Uid="SettingsFontListPreviewHint" Style="{StaticResource HintStyle}" />
                                    </StackPanel>

                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter
                                    x:Name="ColorThemeSettings"
                                    x:Load="{x:Bind _themeSupportsDark}"
                                    Title="{core:Localizer Key=SettingsThemeHeader/Text}"
                                    ContentPlacement="Bottom">
                                    <StackPanel>
                                        <controls:UXRadioButton
                                            x:Name="ThemeLight"
                                            x:Uid="RbThemeLight"
                                            Checked="ThemeLight_Checked"
                                            GroupName="ThemeSelector" />
                                        <controls:UXRadioButton
                                            x:Name="ThemeDark"
                                            x:Uid="RbThemeDark"
                                            Checked="ThemeDark_Checked"
                                            GroupName="ThemeSelector" />
                                        <controls:UXRadioButton
                                            x:Name="ThemeSystem"
                                            x:Uid="RbThemeSystem"
                                            Checked="ThemeSystem_Checked"
                                            GroupName="ThemeSelector" />

                                        <controls:UXHyperlinkButton
                                            x:Uid="SettingsWindowsThemeSettings"
                                            NavigateUri="ms-settings:personalization-colors"
                                            Style="{StaticResource TextBlockButtonStyle}" />
                                    </StackPanel>
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter x:Uid="SettingsDesignStyle">
                                    <StackPanel>
                                        <ComboBox
                                            MinWidth="256"
                                            Margin="0 8 0 0"
                                            SelectedIndex="{x:Bind Settings.ApplicationDesignTheme}"
                                            SelectionChanged="Design_SelectionChanged">
                                            <x:String>Windows 10</x:String>
                                            <x:String>Windows 11</x:String>
                                            <x:String>Classic Windows</x:String>
                                            <x:String>Zune Desktop</x:String>
                                        </ComboBox>
                                    </StackPanel>
                                </controls:SettingsPresenter>

                                <controls:UXButton
                                    x:Uid="RestartButton"
                                    Width="200"
                                    Margin="0 24 0 0"
                                    HorizontalAlignment="Left"
                                    Click="BtnRestart_Click" />

                            </StackPanel>

                            <StackPanel
                                x:Name="UserInterfaceAdvancedPanel"
                                ChildrenTransitions="{x:Bind GetRepositionCollection(ViewModel.AllowAnimation), Mode=OneWay}"
                                Visibility="Collapsed">

                                <TextBlock x:Uid="SettingsAdvancedUILabel" Style="{StaticResource SectionHeaderTextBlockStyle}" />

                                <controls:SettingsPresenter Title="{core:Localizer Key=SettingsSimpleAnimationHeader/Text}" Description="{core:Localizer Key=SettingsSimpleAnimationDescription/Text}">
                                    <ToggleSwitch
                                        x:Name="BasicAnimationToggle"
                                        MinWidth="0"
                                        IsOn="{x:Bind Settings.UseSelectionAnimations, Mode=TwoWay}" />
                                    <controls:SettingsPresenter.Items>
                                        <controls:SettingsPresenter
                                            x:Name="FluentAnimationsToggle"
                                            x:Load="{x:Bind BasicAnimationToggle.IsOn, Mode=OneWay}"
                                            x:Uid="SettingsPointerOverAnimation"
                                            BorderThickness="0 0 0 1"
                                            Style="{StaticResource SubItemSettingsPresenterStyle}">
                                            <ToggleSwitch MinWidth="0" IsOn="{x:Bind Settings.UseFluentPointerOverAnimations, Mode=TwoWay}" />
                                        </controls:SettingsPresenter>
                                        <controls:SettingsPresenter
                                            x:Name="ExpensiveAnimationToggle"
                                            x:Load="{x:Bind BasicAnimationToggle.IsOn, Mode=OneWay}"
                                            Title="{core:Localizer Key=SettingsExpensiveAnimationHeader/Text}"
                                            Description="{core:Localizer Key=SettingsExpensiveAnimationDescription/Text}"
                                            Style="{StaticResource SubItemSettingsPresenterStyle}">
                                            <ToggleSwitch MinWidth="0" IsOn="{x:Bind Settings.AllowExpensiveAnimations, Mode=TwoWay}" />
                                        </controls:SettingsPresenter>
                                    </controls:SettingsPresenter.Items>
                                </controls:SettingsPresenter>



                                <controls:SettingsPresenter Title="{core:Localizer Key=SettingsTransparencyHeader/Text}" Description="{core:Localizer Key=SettingsTransparencyDescription/Text}">
                                    <ToggleSwitch MinWidth="0" IsOn="{x:Bind Settings.IsTransparencyEnabled, Mode=TwoWay}" />
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter
                                    x:Name="ShadowSettings"
                                    x:Load="{x:Bind _themeSupportsShadows}"
                                    Title="{core:Localizer Key=SettingsShadowsHeader/Text}"
                                    Description="{core:Localizer Key=SettingsShadowsDescription/Text}">
                                    <win1903:ToggleSwitch MinWidth="0" IsOn="{x:Bind Settings.EnableShadows, Mode=TwoWay}" />
                                </controls:SettingsPresenter>



                                <controls:SettingsPresenter Title="{core:Localizer Key=SettingsEnablePaneHeader/Text}" Description="{core:Localizer Key=SettingsEnablePaneDescription/Text}">
                                    <ToggleSwitch MinWidth="0" IsOn="{x:Bind Settings.EnablePreviewPane, Mode=TwoWay}" />
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter Title="{core:Localizer Key=SettingsLanguageHeader/Text}">
                                    <StackPanel>
                                        <ComboBox
                                            MinWidth="256"
                                            Margin="0 8 0 0"
                                            ItemsSource="{x:Bind ViewModel.SupportedLanguages}"
                                            PlaceholderText="{x:Bind core:Converters.GetLanguageDisplayFromID(Settings.AppLanguage)}"
                                            SelectedItem="{x:Bind core:Converters.GetSelectedLanguage(Settings.AppLanguage, ViewModel.SupportedLanguages), Mode=TwoWay, BindBack=SelectedLanguageToString}" />

                                        <TextBlock
                                            x:Uid="SettingsNeedRestart"
                                            Margin="4 4 0 4"
                                            Style="{StaticResource HintStyle}"
                                            Visibility="{x:Bind core:Converters.CompareLanguageToSetting(Settings.AppLanguage), Mode=OneWay}" />
                                    </StackPanel>
                                </controls:SettingsPresenter>

                                <controls:UXButton
                                    x:Uid="RestartButton"
                                    Width="200"
                                    Margin="0 24 0 0"
                                    HorizontalAlignment="Left"
                                    Click="BtnRestart_Click" />

                            </StackPanel>

                            <StackPanel x:Name="ExportPanel" Visibility="Collapsed">

                                <TextBlock x:Uid="SettingsExportHeader" Style="{StaticResource SectionHeaderTextBlockStyle}" />

                                <controls:SettingsPresenter
                                    Title="{core:Localizer Key=SettingsPNGExportHeader/Text}"
                                    ContentPlacement="Bottom"
                                    Description="{core:Localizer Key=SettingsPNGExportDescription/Text}">
                                    <StackPanel>
                                        <Slider
                                            x:Name="SldResolution"
                                            HorizontalAlignment="Stretch"
                                            IsThumbToolTipEnabled="True"
                                            Maximum="2048"
                                            Minimum="128"
                                            StepFrequency="64"
                                            TickFrequency="64"
                                            TickPlacement="Outside"
                                            Value="{x:Bind Settings.PngSize, Mode=TwoWay}" />
                                        <TextBlock Margin="0,0,0,0" Style="{StaticResource BodyTextBlockStyle}">
                                            <Run Text="{x:Bind SldResolution.Value, Mode=OneWay}" />
                                            <Run Text="x" />
                                            <Run Text="{x:Bind SldResolution.Value, Mode=OneWay}" />
                                        </TextBlock>
                                    </StackPanel>
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter
                                    Title="{core:Localizer Key=SettingsFontNameExportLabel/Text}"
                                    ContentPlacement="Bottom"
                                    Description="{core:Localizer Key=SettingsFontNameExportDescription/Text}">
                                    <muxc:RadioButtons x:Name="FontNamingSelection" SelectionChanged="FontNamingSelection_SelectionChanged">
                                        <controls:UXRadioButton>
                                            <TextBlock>
                                                <Run x:Uid="SettingsFontExportSystemLabel" />
                                                <Run
                                                    FontSize="13.333"
                                                    Foreground="{ThemeResource TextControlPlaceholderForeground}"
                                                    Text="e.g. MSOFFSYMB.ttf" />
                                            </TextBlock>
                                        </controls:UXRadioButton>
                                        <controls:UXRadioButton>
                                            <TextBlock>
                                                <Run x:Uid="SettingsFontExportOptimizedLabel" />
                                                <Run
                                                    FontSize="13.333"
                                                    Foreground="{ThemeResource TextControlPlaceholderForeground}"
                                                    Text=" e.g. MS Office Symbol Regular.ttf" />
                                            </TextBlock>
                                        </controls:UXRadioButton>
                                    </muxc:RadioButtons>

                                </controls:SettingsPresenter>

                            </StackPanel>

                            <StackPanel x:Name="SearchPanel" Visibility="Collapsed">

                                <TextBlock x:Uid="SettingsCharacterSearchHeader" Style="{StaticResource SectionHeaderTextBlockStyle}" />

                                <controls:SettingsPresenter Title="{core:Localizer Key=InstantSearchToggleHeader/Text}" Description="{core:Localizer Key=SettingsCharacterSearchDescription/Text}">
                                    <ToggleSwitch MinWidth="0" IsOn="{x:Bind Settings.UseInstantSearch, Mode=TwoWay}" />
                                    <controls:SettingsPresenter.Items>
                                        <controls:SettingsPresenter
                                            x:Name="SearchDelayItem"
                                            x:Load="{x:Bind Settings.UseInstantSearch, Mode=OneWay}"
                                            Title="{core:Localizer Key=SearchDelaySelector/Header}"
                                            Style="{StaticResource SubItemSettingsPresenterStyle}">
                                            <muxc:NumberBox
                                                x:Uid="SearchDelaySelector"
                                                Width="200"
                                                HorizontalAlignment="Left"
                                                AcceptsExpression="False"
                                                BorderThickness="1"
                                                FontSize="14"
                                                HeaderTemplate="{StaticResource BlankTemplate}"
                                                LargeChange="50"
                                                Maximum="2000"
                                                Minimum="250"
                                                SmallChange="10"
                                                SpinButtonPlacementMode="Inline"
                                                Value="{x:Bind Settings.InstantSearchDelay, Mode=TwoWay}" />
                                        </controls:SettingsPresenter>
                                    </controls:SettingsPresenter.Items>
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter Title="{core:Localizer Key=SearchResultsSlider/Header}" core:Properties.UseStandardReposition="{x:Bind ViewModel.AllowAnimation, Mode=OneWay}">

                                    <muxc:NumberBox
                                        x:Uid="SearchResultsSlider"
                                        Grid.Column="1"
                                        Width="200"
                                        HorizontalAlignment="Left"
                                        AcceptsExpression="False"
                                        FontSize="14"
                                        Header="#Search Results"
                                        HeaderTemplate="{StaticResource BlankTemplate}"
                                        LargeChange="10"
                                        Maximum="100"
                                        Minimum="5"
                                        SmallChange="5"
                                        SpinButtonPlacementMode="Inline"
                                        Value="{x:Bind Settings.MaxSearchResult, Mode=TwoWay}" />
                                </controls:SettingsPresenter>

                            </StackPanel>

                            <Grid
                                x:Name="CollectionPanel"
                                HorizontalAlignment="Stretch"
                                Visibility="Collapsed">
                                <views:CollectionManagementView Margin="0 0 0 -80" HorizontalAlignment="Stretch" />
                            </Grid>

                            <StackPanel x:Name="ChangePanel" Visibility="Collapsed">
                                <TextBlock x:Uid="SettingsChangelogLabel" Style="{StaticResource SectionHeaderTextBlockStyle}" />

                                <controls:UXHyperlinkButton x:Uid="BtnGithubCommits" NavigateUri="https://github.com/character-map-uwp/Character-Map-UWP/commits/master" />

                                <ItemsControl ItemsSource="{x:Bind ViewModel.Changelog}">
                                    <ItemsControl.ItemTemplate>
                                        <DataTemplate x:DataType="views:ChangelogItem">
                                            <controls:SettingsPresenter
                                                Title="{x:Bind Header}"
                                                Margin="0 0 0 8"
                                                Description="{x:Bind Content}" />
                                        </DataTemplate>
                                    </ItemsControl.ItemTemplate>
                                </ItemsControl>

                            </StackPanel>

                            <StackPanel x:Name="FontPanel" Visibility="Collapsed">

                                <TextBlock
                                    x:Uid="SettingsFontManagementLabel"
                                    OpticalMarginAlignment="None"
                                    Style="{StaticResource SectionHeaderTextBlockStyle}" />

                                <controls:SettingsPresenter Title="{core:Localizer Key=SettingsSystemFontHeader/Text}">
                                    <controls:UXHyperlinkButton x:Uid="SettingsManageSystemFonts" NavigateUri="ms-settings:fonts" />
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter Title="{core:Localizer Key=SettingsImportedFontsLabel/Text}" ContentPlacement="Bottom">

                                    <StackPanel>

                                        <TextBlock x:Uid="SettingsFontImportDescription" Style="{StaticResource DescriptionStyle}" />

                                        <StackPanel Spacing="6">
                                            <TextBlock
                                                x:Uid="ImportLabel"
                                                Margin="0 16 0 0"
                                                Style="{StaticResource HeaderStyle}"
                                                d:Text="Import" />
                                            <Grid
                                                x:Name="ImportFontsRegion"
                                                Width="340"
                                                Height="80"
                                                HorizontalAlignment="Left">
                                                <Rectangle
                                                    Opacity="0.4"
                                                    Stroke="{ThemeResource SystemControlForegroundBaseHighBrush}"
                                                    StrokeDashArray="2 2"
                                                    StrokeThickness="1" />

                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto" />
                                                        <ColumnDefinition Width="*" />
                                                    </Grid.ColumnDefinitions>

                                                    <FontIcon
                                                        Margin="12 12 0 12"
                                                        VerticalAlignment="Top"
                                                        FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                        FontSize="30"
                                                        Glyph="&#xE1E3;" />

                                                    <StackPanel Grid.Column="1" Margin="12">
                                                        <TextBlock
                                                            x:Uid="ImportDragDropLabel"
                                                            FontWeight="SemiBold"
                                                            Opacity="0.7" />
                                                        <TextBlock
                                                            x:Uid="ImportDragDropDescriptionLabel"
                                                            FontSize="12"
                                                            Opacity="0.6"
                                                            TextWrapping="Wrap" />
                                                    </StackPanel>

                                                </Grid>


                                            </Grid>
                                        </StackPanel>

                                        <StackPanel x:Name="ImportedExportPanel" Spacing="6">
                                            <TextBlock
                                                x:Uid="SettingsExportHeader"
                                                Margin="0 16 0 0"
                                                Style="{StaticResource HeaderStyle}" />
                                            <Button
                                                Width="340"
                                                Padding="12 10 12 10"
                                                HorizontalAlignment="Left"
                                                HorizontalContentAlignment="Left"
                                                Background="Transparent"
                                                BorderBrush="{ThemeResource ButtonBorderThemeBrush}"
                                                IsEnabled="{x:Bind ViewModel.IsCollectionExportEnabled, Mode=OneWay}"
                                                Style="{StaticResource ButtonRevealStyle}">
                                                <StackPanel Orientation="Horizontal" Spacing="12">
                                                    <PathIcon
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        Data="F1 M 18.046875 8.75 C 18.320313 8.75 18.575846 8.798828 18.813477 8.896484 C 19.051105 8.994141 19.257813 9.129232 19.433594 9.301758 C 19.609375 9.474284 19.747721 9.679362 19.848633 9.916992 C 19.949543 10.154623 20 10.410156 20 10.683594 C 20 10.9375 19.951172 11.184896 19.853516 11.425781 C 19.755859 11.666667 19.615885 11.878256 19.433594 12.060547 L 12.431641 19.0625 L 8.75 19.980469 L 9.667969 16.298828 L 16.669922 9.306641 C 16.858723 9.117839 17.070313 8.977865 17.304688 8.886719 C 17.539063 8.795573 17.786457 8.75 18.046875 8.75 Z M 18.544922 11.181641 C 18.681641 11.044922 18.75 10.878906 18.75 10.683594 C 18.75 10.481771 18.683268 10.317383 18.549805 10.19043 C 18.41634 10.063477 18.248697 10 18.046875 10 C 17.955729 10 17.867838 10.014648 17.783203 10.043945 C 17.698566 10.073242 17.623697 10.120443 17.558594 10.185547 L 10.800781 16.943359 L 10.46875 18.261719 L 11.787109 17.929688 Z M 7.5 15 L 8.75 15 L 7.5 16.25 L 2.861328 16.25 L 1.25 14.638672 L 1.25 2.5 C 1.25 2.324219 1.282552 2.161459 1.347656 2.011719 C 1.41276 1.86198 1.502279 1.730145 1.616211 1.616211 C 1.730143 1.502279 1.861979 1.412762 2.011719 1.347656 C 2.161458 1.282553 2.324219 1.25 2.5 1.25 L 15 1.25 C 15.17578 1.25 15.338541 1.282553 15.488281 1.347656 C 15.638021 1.412762 15.769856 1.502279 15.883789 1.616211 C 15.997721 1.730145 16.087238 1.86198 16.152344 2.011719 C 16.217447 2.161459 16.25 2.324219 16.25 2.5 L 16.25 7.5 L 15 8.75 L 15 2.5 L 13.75 2.5 L 13.75 8.75 L 3.75 8.75 L 3.75 2.5 L 2.5 2.5 L 2.5 14.111328 L 3.388672 15 L 3.75 15 L 3.75 10 L 12.5 10 L 12.5 11.25 L 11.25 12.5 L 11.25 11.25 L 5 11.25 L 5 15 L 6.25 15 L 6.25 12.5 L 7.5 12.5 Z M 5 7.5 L 12.5 7.5 L 12.5 2.5 L 5 2.5 Z " />
                                                    <TextBlock
                                                        x:Uid="SettingsExportImportedLabel"
                                                        VerticalAlignment="Center"
                                                        FontWeight="SemiBold"
                                                        Opacity="0.7" />
                                                    <ProgressRing
                                                        Width="20"
                                                        Height="20"
                                                        MinWidth="20"
                                                        MinHeight="20"
                                                        HorizontalAlignment="Center"
                                                        VerticalAlignment="Center"
                                                        IsActive="{x:Bind core:Converters.False(ViewModel.IsCollectionExportEnabled), Mode=OneWay}"
                                                        Visibility="{x:Bind core:Converters.FalseToVis(ViewModel.IsCollectionExportEnabled), Mode=OneWay}" />
                                                </StackPanel>
                                                <Button.Flyout>
                                                    <MenuFlyout
                                                        AreOpenCloseAnimationsEnabled="{x:Bind ViewModel.AllowAnimation, Mode=OneWay}"
                                                        MenuFlyoutPresenterStyle="{StaticResource DefaultFlyoutStyle}"
                                                        Placement="Bottom">
                                                        <MenuFlyoutItem x:Uid="CollectionExportFolder" Click="{x:Bind ViewModel.ExportToFolder}" />
                                                        <MenuFlyoutItem x:Uid="CollectionExportZip" Click="{x:Bind ViewModel.ExportAsZip}" />
                                                    </MenuFlyout>
                                                </Button.Flyout>
                                            </Button>
                                        </StackPanel>
                                    </StackPanel>

                                </controls:SettingsPresenter>

                            </StackPanel>

                            <StackPanel x:Name="LicensesPanel" Visibility="Collapsed">
                                <!--<StackPanel.Resources>
                                    <Style TargetType="HyperlinkButton">
                                        <Setter Property="Margin" Value="0 -4 0 0" />
                                    </Style>
                                </StackPanel.Resources>-->
                                <TextBlock x:Uid="SettingsLicensesLabel" Style="{StaticResource SectionHeaderTextBlockStyle}" />

                                <TextBlock x:Uid="SettingsLicensesDescriptionLabel" Style="{StaticResource DescriptionStyle}" />

                                <controls:SettingsPresenter Title="WinUI">
                                    <controls:UXHyperlinkButton Content="MIT License" NavigateUri="https://github.com/microsoft/microsoft-ui-xaml/blob/master/LICENSE" />
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter Title="Win2D">
                                    <controls:UXHyperlinkButton Content="MIT License" NavigateUri="https://github.com/microsoft/Win2D/blob/master/LICENSE.txt" />
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter Title="Windows Community Toolkit">
                                    <controls:UXHyperlinkButton Content="MIT License" NavigateUri="https://github.com/windows-toolkit/WindowsCommunityToolkit/blob/master/license.md" />
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter Title="Humanizer">
                                    <controls:UXHyperlinkButton Content="MIT License" NavigateUri="https://github.com/Humanizr/Humanizer/blob/master/LICENSE" />
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter Title="SQLitePCLRaw">
                                    <controls:UXHyperlinkButton Content="Apache License 2.0" NavigateUri="https://github.com/ericsink/SQLitePCL.raw/blob/master/LICENSE.TXT" />
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter Title="woff2otf-CSharp">
                                    <controls:UXHyperlinkButton Content="Apache License 2.0" NavigateUri="https://github.com/JohnnyWestlake/woff2otf-CSharp/blob/master/LICENSE" />
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter Title="Adobe Glyph List">
                                    <controls:UXHyperlinkButton Content="BSD 3-Clause" NavigateUri="https://github.com/adobe-type-tools/agl-aglfn/blob/master/LICENSE.md" />
                                </controls:SettingsPresenter>

                                <controls:SettingsPresenter Title="Adobe Blank">
                                    <controls:UXHyperlinkButton Content="SIL Open Font License 1.1" NavigateUri="https://github.com/adobe-fonts/adobe-blank/blob/master/LICENSE.txt" />
                                </controls:SettingsPresenter>
                            </StackPanel>

                            <StackPanel x:Name="AboutPanel" Visibility="Collapsed">

                                <TextBlock x:Uid="SettingsAboutLabel" Style="{StaticResource SectionHeaderTextBlockStyle}" />

                                <controls:SettingsPresenter Title="{x:Bind core:Utils.GetAppDescription()}" ContentPlacement="Bottom">
                                    <StackPanel Spacing="12">
                                        <Image
                                            Width="150"
                                            HorizontalAlignment="Left"
                                            Source="/Assets/FileAssociationTile.png" />

                                        <TextBlock
                                            x:Uid="Settings_AboutDescription"
                                            Style="{StaticResource BodyTextBlockStyle}"
                                            TextWrapping="Wrap"
                                            d:Text="#Settings_AboutDescription" />

                                        <StackPanel>
                                            <controls:UXHyperlinkButton Content="GitHub" NavigateUri="https://github.com/character-map-uwp/Character-Map-UWP" />
                                            <controls:UXHyperlinkButton x:Uid="BtnContributors" NavigateUri="https://github.com/character-map-uwp/Character-Map-UWP/graphs/contributors" />
                                        </StackPanel>

                                        <controls:UXButton
                                            x:Name="BtnReview"
                                            x:Uid="BtnRateAndReview"
                                            Width="200"
                                            HorizontalAlignment="Left"
                                            Click="BtnReview_Click" />
                                        <controls:UXButton
                                            x:Name="BtnRestart"
                                            x:Uid="RestartButton"
                                            Width="200"
                                            HorizontalAlignment="Left"
                                            Click="BtnRestart_Click" />

                                    </StackPanel>
                                </controls:SettingsPresenter>

                            </StackPanel>
                        </Grid>
                    </ScrollViewer>
                </Border>
            </Grid>
        </controls:ModalPagePresenter>

    </Grid>
</views:ViewBase>
